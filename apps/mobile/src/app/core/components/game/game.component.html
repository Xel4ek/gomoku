<div class="game" *ngIf="players$ | async as players; else endGame">
  <div class="info">
    <div class="header" *ngIf="players.player.captured">
      Captured: {{ players.player.captured }}
    </div>
    <div
      class="name header"
      [style]="{
        color: players.player.color
      }"
      [class]="{ active: !players.player.turn }"
    >
      {{ players.player.name | titlecase }}
      <span *ngIf="players.player.name === 'ai'">
        - {{ players.player.depth }}</span
      >
    </div>
    <div class="timer" *ngFor="let item of players.player.info">
      {{ item.turn }} [ {{ item.count | number }} /
      {{ item.capacity | number }} ]:
      {{ item.delta | simpleTime }}
    </div>
  </div>
  <div class="middle-section">
    <canvas gomokuDrawer class="playing-field"></canvas>
    <div
      class="info"
      style="font-size: 2rem"
      [style]="{
        color: players.advance.color
      }"
    >
      Round: {{ players.advance.turn }}
    </div>
  </div>
  <div class="info">
    <div class="header" *ngIf="players.enemy.captured">
      Captured: {{ players.enemy.captured }}
    </div>
    <div
      class="name header"
      [style]="{
        color: players.enemy.color
      }"
      [class]="{ active: players.player.turn }"
    >
      {{ players.enemy.name | titlecase
      }}<span *ngIf="players.enemy.name === 'ai'">
        - {{ players.enemy.depth }}</span
      >
    </div>
    <div class="timer" *ngFor="let item of players.enemy.info">
      {{ item.turn }} [ {{ item.count | number }} /
      {{ item.capacity | number }} ]:
      {{ item.delta | simpleTime }}
    </div>
  </div>
  <div class="game-message" *ngIf="players.advance.winner">
    <div>
      Congratulation
      <span [style]="{ color: players.advance.winner }">champion</span>!
    </div>
    <div>
      <a
        tuiButton
        type="button"
        class="tui-space_right-3 tui-space_bottom-3"
        [routerLink]="['/welcome']"
      >
        Play again
      </a>
    </div>
  </div>
</div>
<ng-template #endGame>
  <div class="btn-block">
    <button
      tuiButton
      type="button"
      size="xl"
      appearance="primary"
      [routerLink]="['/settings']"
    >
      Settings
    </button>
  </div>
</ng-template>
